# 线程池构造函数的参数
- corePoolSize 核心线程数
- maxPoolSize 最大线程树
- keepAliveTime 保持存活时间
- workQueue 任务存储队列
- threadFactory 当线程池需要新的线程的时候，会使用threadFactory来生成新的线程
- Handler 由于线程池无法接受你所提交的任务的拒绝策略


# 线程添加规则
- 提交任务
- 判断核心线程是否已满？
  - 否：创建核心线程执行任务
  - 是：判断队列是否已满？
    - 否：任务添加到队列
    - 是：判断线程池是否已满？
      - 否：创建非核心线程执行任务
      - 是：按照策略处理无法执行的任务

# 线程池里线程数量设定多少比较合适
- CPU密集型（加密，计算hash等）：最佳线程数为cpu核心数的1-2倍
- 耗时io型（读写数据库，文件，网络读写等）：最佳线程数一般会大于cpu核心数很多倍，参考Brain Goetz推荐的计算方法
- 线程数=CPU核心数 * （1 + 平均等待时间 / 平均工作时间）

# 线程池的状态
- RUNNING：接受新任务并处理排队任务
- SHUTDOWN：不接受新任务，但处理排队任务
- STOP：不接受新任务，也不处理排队任务，并中断正在进行的任务
- TIDYING：所有任务都中止，workerCount为0时，线程会转换到TIDYING状态，并将运行terminate()钩子方法
- TERMINATED：terminate()运行完成

# 使用线程池的注意点
- 避免任务堆积
- 避免线程数过度增加
- 避免线程泄露